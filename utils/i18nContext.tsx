
import React, { createContext, useContext, useState, useEffect } from 'react';

type LanguageCode = 'en' | 'cn' | 'fr' | 'ar' | 'el';

interface LanguageContextType {
  language: LanguageCode;
  setLanguage: (lang: LanguageCode) => void;
  t: (key: string, ...args: (string | number)[]) => string;
  dir: 'ltr' | 'rtl';
}

const translations: Record<LanguageCode, Record<string, string>> = {
  en: {
    menu: "Menu",
    myNumber: "My number",
    help: "Help",
    settings: "Settings",
    logout: "Logout",
    connection: "Connection",
    connected: "Connected",
    dataIs: "Data is",
    on: "ON",
    off: "OFF",
    roaming: "Roaming",
    roamingIs: "Roaming is",
    timeElapsed: "Time elapsed",
    dataUsage: "Data usage",
    network: "Network",
    battery: "Battery",
    manageDevices: "Manage connected devices",
    usage: "Usage",
    myUsage: "My usage",
    national: "National",
    international: "International",
    currentSession: "Current session",
    infoSource: "Info coming from MAXBOXIN",
    clientArea: "My client area",
    clientAreaDesc: "See your exact information on the client area.",
    connect: "Connect",
    used: "Used",
    remaining: "Remaining",
    messages: "Messages",
    inbox: "Inbox",
    sent: "Sent",
    draft: "Draft",
    noData: "No Data",
    redirectMessages: "Redirect my messages to handset",
    msgStats: "{0} Messages( {1} New )",
    sentStats: "{0} Sent Messages",
    draftStats: "{0} Drafts",
    wifiNetworks: "Wi-Fi Networks",
    services: "Services",
    checkAirtime: "Check Airtime Balance",
    checkBalance: "Check my balance",
    checkNumber: "Check My Number",
    useKeyboard: "Use virtual keyboard",
    cancel: "Cancel",
    send: "Send",
    featureAdmin: "Feature only available to administrator.",
    login: "Login",
    passwordLabel: "Password. For the default password, refer to the sticker on the device.",
    emptyError: "can not be empty.",
    ok: "OK",
    connectedDevices: "Connected Devices",
    deviceName: "Device Name",
    ipAddress: "IP Address",
    macAddress: "MAC Address",
    type: "Type",
    duration: "Duration",
    noDevices: "No devices connected.",
    close: "Close",
    loginAsAdminMsg: "Login as admin to read your messages",
    loginAsAdminBtn: "Login as admin",
    ussdLoginMsg: "Login as admin to use USSD services available with your Orange subscription.",
    scanQrText: "Scan the QR code to connect to Orange ZLT automatically.",
    no: "NO",
    host: "Host",
    internetAccess: "Internet Access",
    offlineDevices: "Offline Devices"
  },
  cn: {
    menu: "菜单",
    myNumber: "我的号码",
    help: "帮助",
    settings: "设置",
    logout: "退出",
    connection: "连接",
    connected: "已连接",
    dataIs: "数据已",
    on: "开启",
    off: "关闭",
    roaming: "漫游",
    roamingIs: "漫游已",
    timeElapsed: "已用时间",
    dataUsage: "数据用量",
    network: "网络",
    battery: "电池",
    manageDevices: "管理连接设备",
    usage: "用量",
    myUsage: "我的用量",
    national: "国内",
    international: "国际",
    currentSession: "当前会话",
    infoSource: "信息来自 MAXBOXIN",
    clientArea: "我的客户专区",
    clientAreaDesc: "在客户专区查看您的详细信息。",
    connect: "连接",
    used: "已用",
    remaining: "剩余",
    messages: "短信",
    inbox: "收件箱",
    sent: "发件箱",
    draft: "草稿箱",
    noData: "暂无数据",
    redirectMessages: "将短信重定向到手机",
    msgStats: "{0} 条消息( {1} 条新消息 )",
    sentStats: "{0} 条已发送消息",
    draftStats: "{0} 条草稿",
    wifiNetworks: "Wi-Fi 网络",
    services: "服务",
    checkAirtime: "查询话费余额",
    checkBalance: "查询余额",
    checkNumber: "查询本机号码",
    useKeyboard: "使用虚拟键盘",
    cancel: "取消",
    send: "发送",
    featureAdmin: "此功能仅管理员可用。",
    login: "登录",
    passwordLabel: "密码。默认密码请参考设备贴纸。",
    emptyError: "不能为空。",
    ok: "确定",
    connectedDevices: "已连接设备",
    deviceName: "设备名称",
    ipAddress: "IP 地址",
    macAddress: "MAC 地址",
    type: "类型",
    duration: "时长",
    noDevices: "暂无设备连接。",
    close: "关闭",
    loginAsAdminMsg: "登录管理员账户以阅读短信",
    loginAsAdminBtn: "登录管理员",
    ussdLoginMsg: "登录管理员以使用您的 Orange 订阅中可用的 USSD 服务。",
    scanQrText: "扫描二维码自动连接到 Orange ZLT。",
    no: "序号",
    host: "主机",
    internetAccess: "互联网访问",
    offlineDevices: "离线设备"
  },
  fr: {
    menu: "Menu",
    myNumber: "Mon numéro",
    help: "Aide",
    settings: "Paramètres",
    logout: "Déconnexion",
    connection: "Connexion",
    connected: "Connecté",
    dataIs: "Données",
    on: "ACTIVÉES",
    off: "DÉSACTIVÉES",
    roaming: "Itinérance",
    roamingIs: "Itinérance",
    timeElapsed: "Temps écoulé",
    dataUsage: "Utilisation des données",
    network: "Réseau",
    battery: "Batterie",
    manageDevices: "Gérer les appareils",
    usage: "Utilisation",
    myUsage: "Mon utilisation",
    national: "National",
    international: "International",
    currentSession: "Session actuelle",
    infoSource: "Infos venant de MAXBOXIN",
    clientArea: "Mon espace client",
    clientAreaDesc: "Voir vos informations exactes sur l'espace client.",
    connect: "Se connecter",
    used: "Utilisé",
    remaining: "Restant",
    messages: "Messages",
    inbox: "Boîte de réception",
    sent: "Envoyés",
    draft: "Brouillons",
    noData: "Aucune donnée",
    redirectMessages: "Rediriger mes messages vers le combiné",
    msgStats: "{0} Messages( {1} Nouveaux )",
    sentStats: "{0} Messages envoyés",
    draftStats: "{0} Brouillons",
    wifiNetworks: "Réseaux Wi-Fi",
    services: "Services",
    checkAirtime: "Vérifier le solde",
    checkBalance: "Vérifier mon solde",
    checkNumber: "Vérifier mon numéro",
    useKeyboard: "Utiliser le clavier virtuel",
    cancel: "Annuler",
    send: "Envoyer",
    featureAdmin: "Fonctionnalité réservée à l'administrateur.",
    login: "Connexion",
    passwordLabel: "Mot de passe. Pour le mot de passe par défaut, voir l'étiquette.",
    emptyError: "ne peut pas être vide.",
    ok: "OK",
    connectedDevices: "Appareils connectés",
    deviceName: "Nom de l'appareil",
    ipAddress: "Adresse IP",
    macAddress: "Adresse MAC",
    type: "Type",
    duration: "Durée",
    noDevices: "Aucun appareil connecté.",
    close: "Fermer",
    loginAsAdminMsg: "Connectez-vous en tant qu'admin pour lire vos messages",
    loginAsAdminBtn: "Connexion admin",
    ussdLoginMsg: "Connectez-vous en tant qu'administrateur pour utiliser les services USSD disponibles avec votre abonnement Orange.",
    scanQrText: "Scannez le code QR pour vous connecter automatiquement à Orange ZLT.",
    no: "N°",
    host: "Hôte",
    internetAccess: "Accès Internet",
    offlineDevices: "Appareils hors ligne"
  },
  ar: {
    menu: "قائمة",
    myNumber: "رقمي",
    help: "مساعدة",
    settings: "إعدادات",
    logout: "خروج",
    connection: "الاتصال",
    connected: "متصل",
    dataIs: "البيانات",
    on: "مفعلة",
    off: "مغلقة",
    roaming: "التجوال",
    roamingIs: "التجوال",
    timeElapsed: "الوقت المنقضي",
    dataUsage: "استخدام البيانات",
    network: "الشبكة",
    battery: "البطارية",
    manageDevices: "إدارة الأجهزة المتصلة",
    usage: "الاستخدام",
    myUsage: "استخدامي",
    national: "محلي",
    international: "دولي",
    currentSession: "الجلسة الحالية",
    infoSource: "المعلومات من MAXBOXIN",
    clientArea: "منطقة العميل",
    clientAreaDesc: "راجع معلوماتك الدقيقة في منطقة العميل.",
    connect: "اتصال",
    used: "مستخدم",
    remaining: "متبقي",
    messages: "الرسائل",
    inbox: "الوارد",
    sent: "المرسل",
    draft: "المسودات",
    noData: "لا توجد بيانات",
    redirectMessages: "توجيه رسائلي إلى الهاتف",
    msgStats: "{0} رسائل( {1} جديد )",
    sentStats: "{0} رسائل مرسلة",
    draftStats: "{0} مسودات",
    wifiNetworks: "شبكات Wi-Fi",
    services: "خدمات",
    checkAirtime: "التحقق من الرصيد",
    checkBalance: "التحقق من رصيدي",
    checkNumber: "التحقق من رقمي",
    useKeyboard: "استخدم لوحة المفاتيح الافتراضية",
    cancel: "إلغاء",
    send: "إرسال",
    featureAdmin: "الميزة متاحة للمسؤول فقط.",
    login: "تسجيل الدخول",
    passwordLabel: "كلمة المرور. للحصول على الافتراضية، راجع الملصق.",
    emptyError: "لا يمكن أن يكون فارغاً.",
    ok: "موافق",
    connectedDevices: "الأجهزة المتصلة",
    deviceName: "اسم الجهاز",
    ipAddress: "عنوان IP",
    macAddress: "عنوان MAC",
    type: "النوع",
    duration: "المدة",
    noDevices: "لا توجد أجهزة متصلة.",
    close: "إغلاق",
    loginAsAdminMsg: "سجل الدخول كمسؤول لقراءة رسائلك",
    loginAsAdminBtn: "تسجيل دخول المسؤول",
    ussdLoginMsg: "قم بتسجيل الدخول كمسؤول لاستخدام خدمات USSD المتاحة مع اشتراك Orange الخاص بك.",
    scanQrText: "امسح رمز الاستجابة السريعة للاتصال بـ Orange ZLT تلقائيًا.",
    no: "رقم",
    host: "المضيف",
    internetAccess: "خدمة الإنترنت",
    offlineDevices: "الأجهزة غير المتصلة"
  },
  el: {
    menu: "Menú",
    myNumber: "Mi número",
    help: "Ayuda",
    settings: "Configuración",
    logout: "Salir",
    connection: "Conexión",
    connected: "Conectado",
    dataIs: "Datos",
    on: "SI",
    off: "NO",
    roaming: "Itinerancia",
    roamingIs: "Itinerancia",
    timeElapsed: "Tiempo transcurrido",
    dataUsage: "Uso de datos",
    network: "Red",
    battery: "Batería",
    manageDevices: "Gestionar dispositivos",
    usage: "Uso",
    myUsage: "Mi uso",
    national: "Nacional",
    international: "Internacional",
    currentSession: "Sesión actual",
    infoSource: "Info de MAXBOXIN",
    clientArea: "Mi área de cliente",
    clientAreaDesc: "Ver información exacta en área de cliente.",
    connect: "Conectar",
    used: "Usado",
    remaining: "Restante",
    messages: "Mensajes",
    inbox: "Buzón de entrada",
    sent: "Enviados",
    draft: "Borradores",
    noData: "Sin datos",
    redirectMessages: "Redirigir mis mensajes al teléfono",
    msgStats: "{0} Mensajes( {1} Nuevos )",
    sentStats: "{0} Mensajes enviados",
    draftStats: "{0} Borradores",
    wifiNetworks: "Redes Wi-Fi",
    services: "Servicios",
    checkAirtime: "Consultar saldo",
    checkBalance: "Consultar mi saldo",
    checkNumber: "Consultar mi número",
    useKeyboard: "Usar teclado virtual",
    cancel: "Cancelar",
    send: "Enviar",
    featureAdmin: "Función solo para administrador.",
    login: "Iniciar sesión",
    passwordLabel: "Contraseña. Para la predeterminada, ver etiqueta.",
    emptyError: "no puede estar vacío.",
    ok: "OK",
    connectedDevices: "Dispositivos conectados",
    deviceName: "Nombre del dispositivo",
    ipAddress: "Dirección IP",
    macAddress: "Dirección MAC",
    type: "Tipo",
    duration: "Duración",
    noDevices: "No hay dispositivos conectados.",
    close: "Cerrar",
    loginAsAdminMsg: "Inicie sesión como admin para leer mensajes",
    loginAsAdminBtn: "Iniciar sesión admin",
    ussdLoginMsg: "Inicie sesión como admin para usar los servicios USSD disponibles con su suscripción de Orange.",
    scanQrText: "Escanee el código QR para conectarse a Orange ZLT automáticamente.",
    no: "NO",
    host: "Host",
    internetAccess: "Acceso a Internet",
    offlineDevices: "Dispositivos sin conexión"
  }
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<LanguageCode>('en');
  const [dir, setDir] = useState<'ltr' | 'rtl'>('ltr');

  useEffect(() => {
    const newDir = language === 'ar' ? 'rtl' : 'ltr';
    setDir(newDir);
    document.documentElement.dir = newDir;
    document.documentElement.lang = language;
  }, [language]);

  const t = (key: string, ...args: (string | number)[]) => {
    let text = translations[language][key] || translations['en'][key] || key;
    args.forEach((arg, index) => {
      text = text.replace(`{${index}}`, String(arg));
    });
    return text;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t, dir }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};
